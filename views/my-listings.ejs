<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>eMarket | My Listings</title>
  <%- include('./partials/icon.ejs') %>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">

  <!-- Navbar -->
<nav class="bg-white shadow-md">
  <div class="container mx-auto px-4 py-4 flex justify-between items-center">
    <!-- Logo -->
    <a href="/" class="flex items-center space-x-2">
      <img src="/logo/logo.png" alt="eMarket Logo" class="w-30 h-10">
    </a>

    <!-- Navigation Links -->
    <div class="flex items-center gap-6">
      
      <% if (isLoggedIn) { %>
        <!-- Show these links only when logged in -->
        <span class="text-gray-600">Welcome, <strong><%= user.username %></strong></span>
        <a href="/create" class="text-gray-600 hover:text-blue-600">Create Listing</a>
        <a href="/my-listings" class="text-blue-600 hover:text-blue-600">My Listings</a>
        <a href="/about" class="text-gray-600 hover:text-blue-600">About Us</a>
        <a href="/logout" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition">Logout</a>
        <% } else { %>
          <!-- Show these links only when NOT logged in -->
        <a href="/about" class="text-gray-600 hover:text-blue-600 font-medium">About Us</a>
        <a href="/login" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">Login</a>
        <a href="/signup" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">Sign Up</a>
      <% } %>
    </div>
  </div>
</nav>


  <!-- Page Content -->
  <div class="container mx-auto px-4 py-10">
    <h2 class="text-3xl font-semibold text-center mb-8">My Listings</h2>

    <% if (listings && listings.length > 0) { %>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        <% listings.forEach(listing => { %>
          <div class="bg-white shadow-md rounded-xl overflow-hidden hover:shadow-lg transition">
            <img src="<%= listing.image %>" alt="<%= listing.title %>" class="w-full h-48 object-cover">
            <div class="p-4">
              <h3 class="text-lg font-semibold mb-2"><%= listing.title %></h3>
              <p class="text-gray-600 mb-3">Current Bid: ₹<%= listing.  currentBid %></p>
              <div class="flex justify-between">
                <a href="/item/<%= listing._id %>" class="text-blue-600 hover:underline">View</a>
                <% if(listing.active){ %>
                <a href="/item/<%= listing._id %>/edit" class="text-green-600 hover:underline">Edit</a>
                <% } %>
              </div>
            </div>
          </div>
        <% }) %>
      </div>
    <% } else { %>
      <div class="text-center text-gray-500 py-20">
        <h3 class="text-xl font-medium mb-4">You haven’t listed any items yet.</h3>
        <a href="/create" class="bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition">Create Your First Listing</a>
      </div>
    <% } %>
  </div>

</body>
</html>
